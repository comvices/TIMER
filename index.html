<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PRO Racing Timer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;600;800&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --neon-cyan: #00f3ff;
      --neon-pink: #ff007f;
      --neon-yellow: #fff300;
    }
    
    body {
      background: #050505;
      color: white;
      font-family: 'Kanit', sans-serif;
      overflow-x: hidden;
    }

    .font-digital { font-family: 'Orbitron', sans-serif; }

    /* Glassmorphism Background */
    .glass-panel {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
    }

    /* Glow Effect */
    .timer-glow-cyan { text-shadow: 0 0 15px var(--neon-cyan), 0 0 30px var(--neon-cyan); color: var(--neon-cyan); }
    .timer-glow-red { text-shadow: 0 0 15px var(--neon-pink), 0 0 30px var(--neon-pink); color: var(--neon-pink); }

    /* Progress Ring Gradient */
    #progress-ring {
      transition: stroke-dashoffset 0.3s ease, stroke 0.3s ease;
      filter: drop-shadow(0 0 8px var(--neon-cyan));
    }

    /* Animations */
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.02); opacity: 0.8; }
    }
    .running-anim { animation: pulse 1.5s infinite ease-in-out; }

    @keyframes shake {
      0%, 100% { transform: translate(0,0); }
      25% { transform: translate(-4px, 4px); }
      75% { transform: translate(4px, -4px); }
    }
    .shake-anim { animation: shake 0.1s infinite; }

    /* Custom Input */
    input[type="number"] {
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid #333;
      transition: all 0.3s;
    }
    input[type="number"]:focus {
      border-color: var(--neon-cyan);
      box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
      outline: none;
    }
  </style>
 </head>
 <body class="h-full flex items-center justify-center p-4">
  
  <div class="w-full max-w-lg relative">
    <!-- Decor Background -->
    <div class="absolute -top-20 -left-20 w-64 h-64 bg-cyan-500/10 rounded-full blur-[100px]"></div>
    <div class="absolute -bottom-20 -right-20 w-64 h-64 bg-pink-500/10 rounded-full blur-[100px]"></div>

    <div class="glass-panel rounded-[2rem] p-8 relative z-10">
      
      <!-- Header -->
      <div class="text-center mb-6">
        <h1 class="text-4xl font-extrabold italic tracking-tighter mb-1 bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent">
            SPEED TIMER
        </h1>
        <div id="status-badge" class="inline-block px-4 py-1 rounded-full bg-gray-800 text-[10px] uppercase tracking-widest text-gray-400 border border-gray-700">
            System Ready
        </div>
      </div>

      <!-- Timer Circle -->
      <div class="relative mx-auto w-72 h-72 mb-8 group">
        <svg class="absolute inset-0 w-full h-full -rotate-90">
          <circle cx="50%" cy="50%" r="46%" stroke="rgba(255,255,255,0.05)" stroke-width="12" fill="none" />
          <circle id="progress-ring" cx="50%" cy="50%" r="46%" stroke="var(--neon-cyan)" stroke-width="12" stroke-linecap="round" fill="none" stroke-dasharray="828" stroke-dashoffset="0" />
        </svg>
        
        <div id="timer-container" class="absolute inset-0 flex flex-col items-center justify-center">
          <span id="timer-display" class="font-digital text-7xl font-black timer-glow-cyan transition-all">00:00</span>
          <span id="mode-indicator" class="text-xs mt-2 text-gray-500 font-bold tracking-widest uppercase">Target Mode</span>
        </div>
      </div>

      <!-- Control Panel -->
      <div class="space-y-6">
        <!-- Input Section -->
        <div class="flex flex-col items-center gap-3">
            <label class="text-gray-400 text-sm font-semibold uppercase tracking-wider">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
            <div class="relative w-full max-w-[200px]">
                <input type="number" id="duration-input" value="30" min="1" class="w-full py-4 rounded-2xl text-center text-3xl font-digital text-white">
                <span class="absolute right-4 top-1/2 -translate-y-1/2 text-cyan-500 font-bold">S</span>
            </div>
        </div>

        <!-- Mode & Sound -->
        <div class="flex justify-center gap-3">
            <button id="mode-btn" class="px-4 py-2 rounded-xl bg-gray-800 hover:bg-gray-700 text-xs font-bold transition-all border border-gray-600 flex items-center gap-2">
                <span id="mode-icon">‚¨áÔ∏è</span> <span id="mode-text">‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á</span>
            </button>
            <button id="sound-btn" class="px-4 py-2 rounded-xl bg-gray-800 hover:bg-gray-700 text-xs font-bold transition-all border border-gray-600 flex items-center gap-2">
                <span id="sound-icon">üîä</span> ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î
            </button>
        </div>

        <!-- Main Actions -->
        <div class="grid grid-cols-2 gap-4">
            <button id="main-btn" class="col-span-1 bg-gradient-to-br from-cyan-400 to-blue-600 hover:from-cyan-300 hover:to-blue-500 text-black font-black py-5 rounded-2xl text-xl uppercase tracking-tighter shadow-[0_0_20px_rgba(6,182,212,0.4)] transition-all active:scale-95">‡πÄ‡∏£‡∏¥‡πà‡∏°</button>
            <button id="reset-btn" class="col-span-1 bg-gray-800 hover:bg-gray-700 text-white font-bold py-5 rounded-2xl text-xl uppercase tracking-tighter transition-all">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Audio context
    const soundStart = new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'); 
    const soundEnd = new Audio('https://assets.mixkit.co/active_storage/sfx/951/951-preview.mp3');   
    const soundTick = new Audio('https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3');

    let isRunning = false;
    let isCountDown = true;
    let isSoundOn = true;
    let timer = null;
    let currentSec = 0;
    let targetSec = 30;

    const display = document.getElementById('timer-display');
    const input = document.getElementById('duration-input');
    const mainBtn = document.getElementById('main-btn');
    const resetBtn = document.getElementById('reset-btn');
    const progressRing = document.getElementById('progress-ring');
    const statusBadge = document.getElementById('status-badge');

    function updateDisplay() {
        const m = Math.floor(Math.abs(currentSec) / 60);
        const s = Math.abs(currentSec) % 60;
        display.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        
        // Progress ring logic
        const total = parseInt(input.value) || 1;
        const progress = isCountDown ? (currentSec / total) : (currentSec / total);
        const offset = 828 - (828 * progress);
        progressRing.style.strokeDashoffset = isFinite(offset) ? offset : 828;

        // Warning state
        if (isCountDown && currentSec <= 5 && currentSec > 0) {
            display.classList.add('shake-anim', 'timer-glow-red');
            if(isSoundOn) { soundTick.currentTime = 0; soundTick.play(); }
        } else {
            display.classList.remove('shake-anim');
        }
    }

    function startTimer() {
        targetSec = parseInt(input.value) || 0;
        if (targetSec <= 0) return;

        if (!isRunning) {
            if (currentSec <= 0 || currentSec >= targetSec) {
                currentSec = isCountDown ? targetSec : 0;
            }
            
            isRunning = true;
            mainBtn.textContent = "‡∏´‡∏¢‡∏∏‡∏î";
            mainBtn.classList.replace('from-cyan-400', 'from-yellow-400');
            statusBadge.textContent = "üèÅ Competition Live";
            statusBadge.classList.replace('bg-gray-800', 'bg-red-900/40');
            input.disabled = true;

            if(isSoundOn) soundStart.play();

            timer = setInterval(() => {
                if (isCountDown) currentSec--;
                else currentSec++;

                updateDisplay();

                if ((isCountDown && currentSec <= 0) || (!isCountDown && currentSec >= targetSec)) {
                    stopTimer(true);
                }
            }, 1000);
        } else {
            stopTimer(false);
        }
    }

    function stopTimer(isFinished) {
        clearInterval(timer);
        isRunning = false;
        mainBtn.textContent = "‡πÄ‡∏£‡∏¥‡πà‡∏°";
        mainBtn.classList.replace('from-yellow-400', 'from-cyan-400');
        statusBadge.textContent = isFinished ? "üîö Finish" : "‚è∏ Paused";
        input.disabled = false;
        
        if (isFinished) {
            if(isSoundOn) soundEnd.play();
            display.classList.add('timer-glow-red');
            setTimeout(() => display.classList.remove('timer-glow-red'), 3000);
        }
    }

    function resetTimer() {
        stopTimer(false);
        targetSec = parseInt(input.value) || 30;
        currentSec = isCountDown ? targetSec : 0;
        statusBadge.textContent = "System Ready";
        statusBadge.classList.remove('bg-red-900/40');
        statusBadge.classList.add('bg-gray-800');
        display.classList.remove('timer-glow-red');
        updateDisplay();
    }

    mainBtn.addEventListener('click', startTimer);
    resetBtn.addEventListener('click', resetTimer);
    
    input.addEventListener('change', () => {
        if(!isRunning) resetTimer();
    });

    document.getElementById('mode-btn').addEventListener('click', function() {
        isCountDown = !isCountDown;
        this.querySelector('#mode-text').textContent = isCountDown ? "‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á" : "‡∏ô‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô";
        this.querySelector('#mode-icon').textContent = isCountDown ? "‚¨áÔ∏è" : "‚¨ÜÔ∏è";
        progressRing.style.stroke = isCountDown ? "var(--neon-cyan)" : "var(--neon-pink)";
        resetTimer();
    });

    document.getElementById('sound-btn').addEventListener('click', function() {
        isSoundOn = !isSoundOn;
        this.innerHTML = isSoundOn ? '<span>üîä</span> ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î' : '<span>üîà</span> ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡∏õ‡∏¥‡∏î';
    });

    // Initialize
    resetTimer();
  </script>
 </body>
</html>
